---
# Preamble

## Author
author:
  name: Верниковская Екатерина Андреевна
  degrees: DSc
  orcid: 0000-0002-0877-7063
  email: kulyabov-ds@rudn.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Отчёт по лабораторной работе №4"
subtitle: "Дисциплина: Сетевые технологии"
license: "CC BY"
## Generic options
lang: ru-RU
number-sections: true
toc: true
toc-title: "Содержание"
toc-depth: 2
## Crossref customization
crossref:
  lof-title: "Список иллюстраций"
  lot-title: "Список таблиц"
  lol-title: "Листинги"
## Bibliography
bibliography:
  - bib/cite.bib
csl: _resources/csl/gost-r-7-0-5-2008-numeric.csl
## Formats
format:
### Pdf output format
  pdf:
    toc: true
    number-sections: true
    colorlinks: false
    toc-depth: 2
    lof: true # List of figures
    lot: true # List of tables
#### Document
    documentclass: scrreprt
    papersize: a4
    fontsize: 12pt
    linestretch: 1.5
#### Language
    babel-lang: russian
    babel-otherlangs: english
#### Biblatex
    cite-method: biblatex
    biblio-style: gost-numeric
    biblatexoptions:
      - backend=biber
      - langhook=extras
      - autolang=other*
#### Misc options
    csquotes: true
    indent: true
    header-includes: |
      \usepackage{indentfirst}
      \usepackage{float}
      \floatplacement{figure}{H}
      \usepackage[math,RM={Scale=0.94},SS={Scale=0.94},SScon={Scale=0.94},TT={Scale=MatchLowercase,FakeStretch=0.9},DefaultFeatures={Ligatures=Common}]{plex-otf}
### Docx output format
  docx:
    toc: true
    number-sections: true
    toc-depth: 2
---

# Цель работы

Целью данной работы является установление и настройка GNS3 и сопутствующего программного обеспечения

# Задание

1. Установить GNS3-all-in-one, GNS3 VM, проверить корректность запуска
2. Импортировать в GNS3 образ маршрутизатора FRR
3. Импортировать в GNS3 образ маршрутизатора VyOS

# Выполнение лабораторной работы

## Установка GNS3-all-in-one

Установили gns3 воспользовавшись менеджером пакетов для ОС Ubuntu: ```sudo apt install gns3-gui gns3-server``` ([рис. @fig-001]), ([рис. @fig-002])

![Установка gns3 на Ubuntu](image/лаба4_1.png){#fig-001 width=70%}

![Версия gns3](image/лаба4_2.png){#fig-002 width=70%}

## Установка GNS3 VM для VirtualBox

Далее установили соответствующую версию виртуальной машины GNS3 VM для VirtualBox (в нашем случае v.2.2.54, так как версия виртуальной машины должна соответствовать версии клиентской и серверной частей GNS3-all-in-one) с гитхаба \url{https://github.com/GNS3/gns3-gui/releases} ([рис. @fig-003])

![Установка GNS3 VM](image/лаба4_3.png){#fig-003 width=70%}

Далее перешли в каталог, в который скачан архив с образом виртуальной машины GNS3.VM.VirtualBox.2.2.54.zip и распокавали архив с образом: ```unzip GNS3.VM.VirtualBox.2.2.54.zip``` ([рис. @fig-004])

![Распаквка архива с образом](image/лаба4_4.png){#fig-004 width=70%}

Далее запустили VirtualBox. Выбрали меню "Файл" -> "Импорт конфигураций...". Указали месторасположение распакованного образа GNS3 VM.ova ([рис. @fig-005])

![Импорт (1)](image/лаба4_5.png){#fig-005 width=70%}

В следующем окне в параметрах импорта выбрали в политике MAC-адреса "Сгенерировать новые MAC-адреса всех сетевых адаптеров". После нажали "Импорт" ([рис. @fig-006])

![Импорт (2)](image/лаба4_6.png){#fig-006 width=70%}

Далее уточнили параметры настройки виртуальной машины GNS3 VM в VirtualBox. Для этого в VirtualBox выбрали импортированную виртуальную машину и перешли в меню "Машина" -> "Настроить". Перешли к опции "Система". Если внизу этого окна есть сообщение об обнаружении неправильных настроек, то, надо внести изменениям ([рис. @fig-007]), ([рис. @fig-008]), ([рис. @fig-009]), ([рис. @fig-010])

![Импортированная виртуальная машина](image/лаба4_7.png){#fig-007 width=70%}

![Настройки системы (1)](image/лаба4_8.png){#fig-008 width=70%}

![Настройки системы (2)](image/лаба4_9.png){#fig-009 width=70%}

![Настройки системы (3)](image/лаба4_10.png){#fig-010 width=70%}

Далее настроили вложенную виртуализацию в VirtualBox. Для этого в VirtualBox выбрали импортированную виртуальную машину и перешли в меню "Машина" -> "Настроить". Перешли к опции "Система" и вкладке "Процессор". Надо было убедиться, что нет возможности в графическом интерфейсе отметить флажок "Включить Nested VT-x/AMD-V". Для включения вложенной виртуализации надо воспользоваться командной строкой терминала и ввести команду: ```vboxmanage modifyvm "GNS3 VM" --nested-hw-virt on```. 

У меня не было такой проблемы и виртуализация была включена сразу ([рис. @fig-011]), ([рис. @fig-012])

![Настройка вложенной виртуализации в VirtualBox](image/лаба4_11.png){#fig-011 width=70%}

![Проверка настроек системы](image/лаба4_12.png){#fig-012 width=70%}

Далее настроили сетевой адаптер. Для этого в VirtualBox выбрали импортированную виртуальную машину и перешли в меню "Машина" -> "Настроить". Перешли к опции "Сеть" и во вкладке "Адаптер 1" тип подключения должен быть установлен как "Виртуальный адаптер хоста". В этом режиме адаптер хоста использует специальное устройство vboxnet0, создается подсеть и назначаются IP-адреса сетевым картам гостевых операционных систем ([рис. @fig-013])

![Настройка сетевого адаптера GNS3 VM в VirtualBox](image/лаба4_13.png){#fig-013 width=70%}

## Запуск экземпляра GNS3 в VirtualBox

Запустили GNS3 VM в VirtualBox. Затем в нашей основной операционной системе запустили приложение gns3 ([рис. @fig-014]), ([рис. @fig-015])

![Запуск GNS3 VM в VirtualBox](image/лаба4_14.png){#fig-014 width=70%}

![Запуск gns3](image/лаба4_15.png){#fig-015 width=70%}

При первом запуске приложения gns3 запускается мастер настройки, в котором выбрали первый способ работы с gns3 — "Run appliance in a virtual machine" (т.е. запуск устройства на виртуальной машине), далее нажимаем "Next" ([рис. @fig-016])

![Мастер настройки GNS3](image/лаба4_16.png){#fig-016 width=70%}

В следующем окне указываются настройки локального сервера. Путь к серверу и порт оставили без изменений. Выбрали IP-адрес привязки хоста, находящегося в подсети VirtualBox, затем нажали "Next" ([рис. @fig-017])

![Мастер настройки GNS3: настройка локального сервера](image/лаба4_17.png){#fig-017 width=70%}

После успешного подсоединения закончили настройку ([рис. @fig-018]), ([рис. @fig-019])

![Успешное подсоединение](image/лаба4_18.png){#fig-018 width=70%}

![Servers Summary](image/лаба4_19.png){#fig-019 width=70%}

## Выключение GNS3

Выключили GNS3 через меню "File" -> "Quit". При этом виртуальная машина GNS VM должна выключится сама ([рис. @fig-020])

![Выключение GNS3](image/лаба4_20.png){#fig-020 width=70%}

## Добавление образа маршрутизатора FRR

В рабочем пространстве GNS3 на левой боковой панели выбрали просмотр маршрутизаторов (Browse Routers), затем нажалм на "+ New template" ([рис. @fig-021])

![Просмотр маршрутизаторов](image/лаба4_21.png){#fig-021 width=70%}

В открывшемся окне указали рекомендуемое верхнее значение, а именно, "устанавливать образ с GNS3-сервера", нажали "Next" ([рис. @fig-022])

![Добавление образа устройства в GNS3: выбор источника](image/лаба4_22.png){#fig-022 width=70%}

В следующем окне выбрали "Routers" и образ "FRR (FRRouting)", нажали "Install" ([рис. @fig-023])

![Добавление образа устройства в GNS3: выбор образа (1)](image/лаба4_23.png){#fig-023 width=70%}

В следующем окне указали, что устанавливать образ следует на "виртуальную машину GNS3 VM", нажали "Next" ([рис. @fig-024])

![Добавление образа устройства в GNS3: выбор места установки](image/лаба4_24.png){#fig-024 width=70%}

Далее предлагается выбор эмулятора, оставили предложенное, нажмали "Next" ([рис. @fig-025])

![Добавление образа устройства в GNS3: выбор эмулятора](image/лаба4_25.png){#fig-025 width=70%}

В следующем окне предлагается перечень файлов для скачивания и последующей установки. Выбрали наиболее актуальную версию и нажали "Download" ([рис. @fig-026])

![Добавление образа устройства в GNS3: выбор версии для установки](image/лаба4_26.png){#fig-026 width=70%}

После окончания скачивания (процесс скачивания отобразился в браузере нашей основной ОС) импортировали образ, затем нажали "Next" ([рис. @fig-027]), ([рис. @fig-028])

![Добавление образа устройства в GNS3: установка (1)](image/лаба4_27.png){#fig-027 width=70%}

![Добавление образа устройства в GNS3: импорт образа (1)](image/лаба4_28.png){#fig-028 width=70%}

На заключительном окне указывается краткая информация об устройстве, посмотрели её и нажмали "Finish" ([рис. @fig-029])

![Добавление образа устройства в GNS3: завершение установки](image/лаба4_29.png){#fig-029 width=70%}

В рабочем пространстве на левой панели в списке маршрутизаторов появилс образ устройства FRR ([рис. @fig-030])

![Просмотр списка образов маршрутизаторов (1)](image/лаба4_30.png){#fig-030 width=70%}

Далее необходимо настроить образ маршрутизатора. Нажали на образ устройства, в меню выбрали "Configure template". В открывшемся окне во вкладке "General settings" в поле "On close" выбрали "Send the shutdown signal (ACPI)" ([рис. @fig-031])

![Настройка образа маршрутизатора: General settings (1)](image/лаба4_31.png){#fig-031 width=70%}

Во вкладке "HDD" поставили галочку "Automatically create a config disk on HDD" ([рис. @fig-032])

![Настройка образа маршрутизатора: HDD (1)](image/лаба4_32.png){#fig-032 width=70%}

## Добавление образа маршрутизатора VyOS

Далее необходимо добавить образ платформы маршрутизации VyOS. Проделываем те же самые действия что и с FRR. Версию скачали с гитхаба \url{https://github.com/yamadharma/dyos-build/releases} ([рис. @fig-033]), ([рис. @fig-034]), ([рис. @fig-035]), ([рис. @fig-036]), ([рис. @fig-037]), ([рис. @fig-038])

![Добавление образа устройства в GNS3: выбор образа (2)](image/лаба4_33.png){#fig-033 width=70%}

![Добавление образа устройства в GNS3: установка (2)](image/лаба4_34.png){#fig-034 width=70%}

![Добавление образа устройства в GNS3: импорт образа (2)](image/лаба4_35.png){#fig-035 width=70%}

![Настройка образа маршрутизатора: General settings (2)](image/лаба4_36.png){#fig-036 width=70%}

![Настройка образа маршрутизатора: HDD (2)](image/лаба4_37.png){#fig-037 width=70%}

![Просмотр списка образов маршрутизаторов (2)](image/лаба4_38.png){#fig-038 width=70%}


# Выводы

В ходе выполнения лабораторной работы №4 мы установили и настроили GNS3 и сопутствующее программное обеспечение

# Список литературы

1. [Лаборатораня работа №4](https://esystem.rudn.ru/pluginfile.php/2858371/mod_resource/content/2/004-lab_GNS3_base.pdf)

2. [GNS3 VM для VirtualBox](https://github.com/GNS3/gns3-gui/releases)

3. [VyOS](https://github.com/yamadharma/dyos-build/releases)
