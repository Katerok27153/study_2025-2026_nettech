---
# Preamble

## Author
author:
  name: Верниковская Екатерина Андреевна
  degrees: Student
  orcid:
  email: 1132236136@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      country: Российская Федерация
      postal-code: 117198
      city: Москва
      address: ул. Миклухо-Маклая, д. 6
## Title
title: "Доклад"
subtitle: "Протокол UDP"
license: "CC BY"
## Generic options
lang: ru-RU
number-sections: true
toc: true
toc-title: "Содержание"
toc-depth: 2
## Crossref customization
crossref:
  lof-title: "Список иллюстраций"
  lot-title: "Список таблиц"
  lol-title: "Листинги"
## Bibliography
bibliography:
  - bib/cite.bib
csl: _resources/csl/gost-r-7-0-5-2008-numeric.csl
## Formats
format:
### Pdf output format
  pdf:
    toc: true
    number-sections: true
    colorlinks: false
    toc-depth: 2
    lof: true # List of figures
    lot: true # List of tables
#### Document
    documentclass: scrreprt
    papersize: a4
    fontsize: 12pt
    linestretch: 1.5
#### Language
    babel-lang: russian
    babel-otherlangs: english
#### Biblatex
    cite-method: biblatex
    biblio-style: gost-numeric
    biblatexoptions:
      - backend=biber
      - langhook=extras
      - autolang=other*
#### Misc options
    csquotes: true
    indent: true
    header-includes: |
      \usepackage{indentfirst}
      \usepackage{float}
      \floatplacement{figure}{H}
      \usepackage[math,RM={Scale=0.94},SS={Scale=0.94},SScon={Scale=0.94},TT={Scale=MatchLowercase,FakeStretch=0.9},DefaultFeatures={Ligatures=Common}]{plex-otf}
### Docx output format
  docx:
    toc: true
    number-sections: true
    toc-depth: 2
---

# Вводная часть

**Актуальность темы и проблема:** UDP крайне актуален для современных приложений, таких как стриминг и онлайн-игры, где критически важна минимальная задержка. Проблема в том, что хотя протокол TCP гарантирует надежную доставку данных, его механизмы создают задержки, неприемлемые для работы в реальном времени. UDP решает эту проблему, жертвуя надежностью ради скорости

**Объект и предмет исследования:** протокол UDP — его архитектура, ключевые характеристики и фундаментальные отличия от других протоколов, в первую очередь TCP 

**Цель:** цель данного доклада – изучить ключевые особенности протокола UDP, выявить его
преимущества и недостатки по сравнению с TCP, а также определить основные сферы его эффективного применения

**Задачи исследования:** изучить архитектуру и работу протокола UDP, провести сравнительный
анализ его характеристик с протоколом TCP по ключевым параметрам производительности и надежности, а также сформулировать практические рекомендации по выбору транспортного протокола для различных классов сетевых приложений

**Материалы и методы и инструменты исследования:** интернет-ресурсы, аналитика и практические навыки работы на своей операционной системе Linux (Ubuntu), работа с Wireshark

# Введение

В мире сетевых коммуникаций не всем приложениям требуются гарантии доставки и строгий порядок данных, предоставляемые TCP. Например, в реальном времени — видеотрансляции, голосовой связи или онлайн-играх — задержка критичнее потери отдельных пакетов. UDP, в отличие от TCP, следует принципу «отправил и забыл», обеспечивая минимальные задержки за счёт отказа от контроля соединения и подтверждения доставки. Это делает его незаменимым там, где скорость и эффективность преобладают над надёжностью. Таким образом, понимание роли UDP в сетевой инфраструктуре позволяет грамотно выбирать инструменты для построения производительных и отзывчивых систем, где каждая миллисекунда на счету.

## Что такое UDP?

**UDP (User Datagram Protocol)** – это транспортный протокол интернет-модели TCP/IP, обеспечивающий минималистичный способ передачи данных между сетевыми приложениями.

Основная цель протокола - обеспечить максимально быструю передачу данных с минимальными задержками, что достигается за счет отказа от установления соединения, подтверждения доставки и контроля целостности данных, характерных для более сложных протоколов, таких как TCP. [@ddos]

![Интернет-модель TCP/IP](image/udp.png)

## История и развитие UDP

История UDP неразрывно связана с созданием стека протоколов TCP/IP, который лег в основу современного Интернета. В 1970-х годах перед **Агентством Перспективных Исследовательских Проектов (DARPA) США** стояла задача создания надежной, децентрализованной сети, способной функционировать даже в случае выхода из строя части узлов.

Изначально основным транспортным протоколом был **TCP (Transmission Control Protocol).** Он предлагал надежную, с установлением соединения, доставку данных. Однако исследователи столкнулись с проблемой: не всем сетевым задачам нужна была вся сложность TCP. Например, для простых запросов-ответов или широковещательных сообщений накладные расходы на установление соединения, подтверждение получения и повторную отправку потерянных пакетов были избыточными и приводили к неоправданным задержкам.

1. Необходимость в более легковесном протоколе привела к разделению функций. **Протокол UDP** был разработан Дэвидом П. Ридом **в 1980 году** и официально определён в RFC 768. UDP был представлен не как замена TCP, а как альтернатива для конкретных сценариев использования, где скорость и эффективность важнее гарантий.

2. **В 1980-1990-е годы** UDP прошел путь от простейшего протокола до фундаментального элемента интернета. На основе UDP стали разрабатываться критически важные системы, для которых его модель передачи оказалась идеальной. **DNS** выбрал UDP для быстрых запросов-ответов при преобразовании доменных имен в IP-адреса. **SNMP** использовал его для эффективного управления сетевым оборудованием, а **RIP** — для обмена маршрутной информацией. Особенно значимым стало применение UDP для передачи голоса и видео с развитием мультимедийных технологий.

3. В современную эпоху значимость UDP не только сохранилась, но и возросла, особенно для приложений, критичных к задержкам. Он остается фундаментальным для VoIP, видеоконференций и DNS, где его скорость незаменима. Новым этапом в эволюции протокола стало появление **QUIC** — современного транспортного протокола, который использует UDP в своей основе.

![Эволюция UDP](image/udp-history.png)

# Архитектура и работа UDP

UDP — простейший транспортный протокол. Он не устанавливает соединения, не гарантирует доставку и не упорядочивает пакеты. Каждый пакет (датаграмма) независим и содержит только порты, длину и контрольную сумму. [@book]

## Основные компоненты протокола

Архитектура UDP предельно минималистична и включает всего два фундаментальных компонента:

- **Заголовок фиксированного размера** — содержит минимально необходимую информацию для доставки данных
- **Область данных (полезная нагрузка)** — передаваемая информация от приложения

![Архитектура UDP](image/udp-protocol.png)

## Формат заголовка UDP

Заголовок UDP имеет фиксированный размер — 8 байт. Его структура проста и состоит из четырёх полей по 2 байта каждое:

- **Source Port (Порт отправителя) [16 бит]:** Номер порта приложения-отправителя. Необязательное поле, может быть равно нулю
- **Destination Port (Порт получателя) [16 бит]:** Ключевое поле, определяющее, какому приложению на целевом хосте предназначен пакет
- **Length (Длина) [16 бит]:** Общая длина датаграммы (заголовок + данные) в байтах
- **Checksum (Контрольная сумма) [16 бит]:** Используется для проверки целостности заголовка и данных. Необязательное поле, но практически всегда используется

![Структура UDP](image/udp-components.png)

## Схема вычисления контрольной суммы

Контрольная сумма в UDP служит для проверки целостности данных при передаче. Её ключевая особенность — использование псевдозаголовка, который включает важные поля из IP-пакета. Это позволяет обнаружить не только ошибки в данных UDP, но и некоторые ошибки маршрутизации. [@samlit]

Для вычисления контрольной суммы формируется временная структура - псевдозаголовок (12 байт):

- Source/Destination IP Address - IP-адреса из IP-заголовка
- Zero - всегда 0 (1 байт)
- Proto - код протокола (17 для UDP) (1 байт)
- UDP Length - длина UDP-дейтаграммы

![Псевдозаголовок](image/udp-z.png)

Алгоритм:

1. Формирование псевдозагаловка (IP-адреса отправителя и получателя, код протокола = 17, длина UDP-пакета)
2. Конкатенируются: псевдозаголовок + UDP-заголовок (с нулевой контрольной суммой) + данные
3. Вычисляется 16-битная сумма с переносом для всей структуры
4. Результат инвертируется (заменяется дополнением до единицы)

Проверка: Получатель повторяет расчет. Если результат ≠ 0xFFFF, пакет отбрасывается

![Алгоритм расчёта контрольной суммы](image/udp-algorithm.png)

## Принцип работы

Работа UDP строится на модели "отправил и забыл" (fire-and-forget):

1. **Инкапсуляция:** приложение передаёт данные UDP, который добавляет к ним свой 8- байтовый заголовок, формируя датаграмму.
2. **Адресация:** UDP использует порты для мультиплексирования и демультиплексирования. Порт отправителя указывает, от какого приложения отправлен пакет, а порт получателя — какому приложению на сервере он предназначен.
3. **Передача:** сформированная датаграмма передаётся нижележащему сетевому уровню (IP) для дальнейшей маршрутизации.
4. **Доставка:** на стороне получателя UDP проверяет контрольную сумму. Если проверка прошла успешно, пакет передаётся приложению, ожидающему данных на указанном порту. Если нет — пакет молча отбрасывается. [@ibm]

![Схема работы UDP](image/udp-work.png)

# Сравнительный анализ UDP vs TCP

## Сравнительная таблица

\begin{table}[H]
\centering
\caption{Сравнение TCP и UDP}
\label{table:table}
\begin{tabular}{|p{4cm}|p{4cm}|p{4cm}|}
\hline
\textbf{Критерий} & \textbf{TCP} & \textbf{UDP} \\ \hline
Установка соединения & Требует установки (three-way handshake) & Без установки соединения \\ \hline
Гарантия доставки & Гарантирована & Не гарантирована \\ \hline
Контроль перегрузки & Есть сложные алгоритмы & Отсутствует \\ \hline
Заголовок & 20-60 байт & 8 байт \\ \hline
Надёжность & Высокая (повторные передакчи) & Низкая (пакеты могут терятся) \\ \hline
Скорость & Выше задержки, ниже пропускная способность & Ниже задержки, выше пропускная способность \\ \hline
Тип передачи & Потоковый (stream) & Датаграммы (message) \\ \hline
\end{tabular}
\end{table}

Таким образом, TCP требует подтверждения каждого пакета, тогда как UDP отправляет данные без ожидания ответа, что и объясняет его более высокую скорость работы в реальном времени.

![Разница TCP и UDP](image/udp-vs-tcp.png)

## Когда выбрать UDP?

Выбор в пользу UDP оправдан в нескольких ключевых сценариях, где преимущества протокола перевешивают его ограничения и скорость важнее надёжности:

1. **Видеозвонки и онлайн-игры:** потеря нескольких пакетов почти незаметна (просто подтормаживает видео), а вот задержки из-за повторной отправки данных в TCP могут полностью сорвать разговор или игровой процесс.

2. **Потоковое вещание:** при трансляции видео тысячам зрителей важно быстро доставлять новые данные, а не пересылать потерянные. Современные видеоплееры умеют скрывать мелкие потери, но не могут бороться с постоянными задержками.

3. **Быстрые запросы-ответы:** DNS-запросы ("какой IP у сайта?") и DHCP ("получить настройки сети") длятся миллисекунды. Использование TCP для таких кратковременных операций было бы избыточным.

4. **Многопользовательские трансляции:** когда нужно отправить данные сразу многим получателям (например, биржевые котировки), UDP работает эффективнее, поскольку не требует установки отдельных соединений с каждым клиентом.

Главное правило: UDP выбирают, когда важно доставить данные максимально быстро, а потерю отдельных пакетов приложение может пережить.
 
# Практическое применение

Чтобы посмотреть, как работает UDP в реальной жизни, была развёрнута локальная UDP-инфраструктура и проанализирована передача данных с помощью Wireshark

В ходе эксперимента мы:

- Запустили UDP-сервер и клиент для обмена сообщениями
- Перехватили сетевой трафик с помощью Wireshark
- Проанализировали структуру UDP-пакетов
- Наглядно увидели принципы работы ненадежной доставки данных

## Запуск UDP-сервера

Открыли первый терминал и запустили сервер ```ncat -ul 12345 –keep-open```

![Запуск сервера](image/1.png)

- ncat - современная версия netcat
- -u - работаем по UDP протоколу
- -l - слушаем (listen) входящие соединения
- 12345 - порт для прослушивания
- --keep-open - не закрывать сервер после получения сообщения

Результат: Сервер запущен и ждет UDP-пакеты на порту 12345

## Отправка сообщений с клиента

Открыли второй терминал и отправили сообщение ```echo "привет" | ncat -u localhost 12345```

![Отправка сообщения с клиента](image/2.png)

- -u - UDP режим
- localhost:12345 - адрес и порт сервера

Видим в окне сервера что сообщение успешно отправлено

![Отправленное сообщение](image/3.png)

## Анализ трафика в Wireshark

Установили фильтр для Wireshark ```udp.port == 12345```

![Фильтр для Wireshark](image/4.png)

Что произошло:

1. Клиент отправил сообщение "привет" на порт 12345
2. Сервер получил и отобразил сообщение "привет"
3. Wireshark зафиксировал один UDP-пакет
4. Ответа от сервера не было - это норма для UDP

![UDP-пакет в Wireshark](image/5.png)

Проанализируем UDP-заголовок:

- Source Port: 53785 (временный порт, выделенный ОС для клиента)
- Destination Port: 12345 (наш серверный порт)
- Length: 21 байт
- Checksum: 0x0028 [unverified] – контрольная сумма, не проверялась. Wireshark на Linux часто не
может проверить контрольные суммы для локального трафика (loopback), потому что: пакеты захватываются до вычисления контрольной суммы или ядро обрабатывает их особым образом для localhost
- [Checksum Status: Unverified] – статус проверки

![UDP-заголовок](image/6.png)

Проанализируем датаграмму:

- Data (13 bytes) - полезная нагрузка датаграммы

- Hex-представление: d0bf d180 d0b8 d0b2 d0b5 d182 0a

- Длина данных: 13 байт

![Датаграмма](image/7.png)

Расшифруем hex в текст

![Расшифровка hex в текст](image/8.png)

Мы убедились, что отправленное сообщение "привет" передается точно в том виде, в котором было отправлено. 

# Выводы

Таким образом, UDP занимает важную нишу в сетевых коммуникациях как минималистичный транспортный протокол. Его ключевое преимущество заключается в обеспечении минимальной задержки передачи данных за счет отказа от механизмов установления соединения, подтверждения доставки и контроля перегрузки.

Протокол находит широкое применение в задачах, где скорость передачи критически важна, а потеря части пакетов допустима: в VoIP-телефонии, онлайн-играх, потоковом видео и DNS-запросах. Эволюция UDP продолжается - на его основе создаются современные протоколы такие как QUIC, что подтверждает актуальность его архитектурных принципов.

Несмотря на ограничения в надежности, UDP остается незаменимым инструментом для приложений реального времени, демонстрируя, что в современных сетевых технологиях эффективность часто важнее абсолютной надежности.

# Список литературы{.unnumbered}

::: {#refs}
::: 
